
## OPPO 全球售后项目

**背景**：实现本地通话软件与浏览器页面的 websocket 通信，由于系统可以打开多个网页，websocket 连接会简历多个，这样会消耗过多的资源，出于优化目的，想要找出一种方案能够在多个浏览器 TAB 共享同一个 websocket 连接，多个 tab 页之间通过通信方式来进行状态同步

**诉求**：希望在多个 tab 页共享一个 ws 连接即可。

**尝试的解决方案** ：要实现共享就需要有一个存在于多个 tab 之外的一块区域来实现，思考方案如下：

- 使用能在多个 tab 共享的本地存储，localStorage、sessionStorage、indexDB 等，但这种方式只用于共享一些简单的字符串数据，达不到要求
- 使用一个 tab 页作为通信 tab，自己建立主从关系
- SharedWorker 最终解决方案

**方案效果**：上线平稳运行，能很多地服务于现在的业务。

