
## 介绍

WebSocket （下面简称 ws）需要心跳检测（通常基于 Ping/Pong 帧实现），主要时为了确保连接的稳定性和可用性。

以下是心跳检测的几个关键原因：

**检测连接的活跃性**

ws 是一种持久连接协议，一旦建立连接，客户端与服务端之间可以在教程时间内保持连接。然后网络环境可能会发生变化，导致连接中断（如网络波动、设别端点、路由器重启等等）。心跳检测可以检测到这种连接中断的情况。

如果一方在一段时间内未收到对方法的回应（Pong 帧），可以认为连接已经断开，进而采取重连或者其他处理措施。

**预防僵尸连接**

在某些情况下，客户端或服务器可能奔溃或者进入异常状态，但连接并未正常关闭。在这种情况下，连接依然存在，但实际上不能传输数据，被称为僵尸连接。心跳检测可以识别并清理无效连接。

**优化资源利用**

ws 连接通常会占用一定的资源如内存、线程等，如果连接长时间处于非活跃状态，通过心跳检测可以及时发现和关闭这些连接，释放资源。