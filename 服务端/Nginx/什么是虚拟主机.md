
## 介绍

**虚拟主机**（英语：virtual hosting）或称**共享主机**（shared web hosting），又称**虚拟服务器**，是一种单一主机或主机群，而且它们可以托管多个域名、多个[网站](https://zh.wikipedia.org/wiki/%E7%B6%B2%E7%AB%99)或服务。虚拟主机之间完全独立，并可由用户自行管理，虚拟并非指不存在，而是指空间是由实体的服务器延伸而来，其[硬件](https://zh.wikipedia.org/wiki/%E7%A1%AC%E9%AB%94 "硬件")系统可以是基于服务器群，或者单个服务器。

**虚拟主机技术主要是为了节省服务器的硬件成本**，不必为每一个服务都分配一个硬件服务器资源。

虚拟主机技术主要应用于HTTP，FTP，EMAIL等多项服务，将**一台服务器的某项或者全部服务内容[逻辑](https://zh.wikipedia.org/wiki/%E9%82%8F%E8%BC%AF "逻辑")划分为多个服务单位，对外表现为多个服务器**

本文只讨论单个服务器托管多个域名

## 使用虚拟主机的目的

### ⭐降低成本

**降低成本是使用虚拟主机的一个主要目的。**

虚拟主机使得单一服务器的资源可以被更有效的利用，包括[存储器](https://zh.wikipedia.org/wiki/%E9%9B%BB%E8%85%A6%E8%A8%98%E6%86%B6%E9%AB%94 "存储器")、存储空间或[处理器](https://zh.wikipedia.org/wiki/%E4%B8%AD%E5%A4%AE%E8%99%95%E7%90%86%E5%99%A8 "中央处理器")资源。因为通常服务单一网址所需的资源对整部服务器来说相当小，如此可让服务器的资源被更有效的利用。

### 方便管理

所有的虚拟主机都在同一部主机中，因此彼此可以共享相同的配置设置，借此节省管理的人力与成本。[[2]] (https://zh.wikipedia.org/wiki/%E8%99%9A%E6%8B%9F%E4%B8%BB%E6%9C%BA#cite_note-multiple2-2)

### 提高性能

相同主机内的虚拟主机可以共享彼此的程序集（Process Pool），因此可以缩短对客户端的回应时间。[[2]] (https://zh.wikipedia.org/wiki/%E8%99%9A%E6%8B%9F%E4%B8%BB%E6%9C%BA#cite_note-multiple2-2)

## 虚拟主机的实现类型

虚拟主机的实现类型主要有三种：

- 基于网址名称（域名）- Named-based
- 基于 IP 地址 - IP-based
- 基于端口号 - Port-based

### 基于网址名称

基于网址名称的实现，客户端需要提供域名标识（这通常是 HTTP 请求头中的 Host 字段），服务器通过识别客户端传过来的字段来识别网址，决定其所对应的服务。

这个方法有效地减少了 IP 地址的占用。

### 基于 IP 地址

基于 IP 的实现，是在一台物理服务器上配置多个 IP 地址（这是可以支持的），确保每个虚拟主机有一个独立的 IP 地址。

客户端发送请求，通过 DNS 解析得到 IP 地址，然后请求该 IP，服务器则根据 IP 地址决定选择使用哪个虚拟主机来为客户端提供服务。

### 基于端口号

近似于IP地址对应，不过是在**同一个IP之下**，利用不同的Port端口号来区别不同的服务，藉以快速建立多个虚拟主机。例如：

- 192.168.0.1:80
- 192.168.0.1:8080
- 192.168.0.1:8888

**缺点**：

不过这类的应用大多用在私人或实验性质的服务中，原因是**用户无法利用默认的端口号**（例如Web服务的默认端口号80）取用提供的服务，除非用户知道提供服务的端口号。